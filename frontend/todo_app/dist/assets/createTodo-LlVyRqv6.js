import{j as e,r as l}from"./index-nmOx9_9Z.js";import{L as i}from"./logoutAppbar-kOH0Wc8S.js";function c({todos:r}){return e.jsx("div",{children:r.map(t=>e.jsxs("div",{id:t._id,className:" mt-4 w-4/5 h-28 flex justify-between bg-[#444444]",children:[e.jsxs("div",{children:[e.jsxs("div",{className:`pl-4 text-5xl text-[#ff9606] ${t.completed?"line-through":"null"}`,children:[" ",t.title," "]}),e.jsxs("div",{className:` pl-6 p-2 text-lg  text-white ${t.completed?"line-through":"null"}`,children:[" ",t.description," "]})]}),e.jsxs("div",{children:[e.jsx("button",{className:`m-4 mr-4 bg-[white]  hover:bg-green-900 rounded-lg text-green-500 font-medium py-2 px-4 rounded ${t.completed?"bg-green-900":"null"}`,onClick:async()=>{if(t.completed)try{const o=await fetch(`http://localhost:3000/todo/Uncomplete/${t._id}`,{method:"PUT",headers:{"Content-Type":"application/json"}});if(!o.ok)throw new Error("Failed to mark todo as incomplete");let a=await o.json()}catch(o){console.error("Error marking todo as incomplete:",o)}else try{const o=await fetch(`http://localhost:3000/todo/completed/${t._id}`,{method:"PUT",headers:{"Content-Type":"application/json"}});if(!o.ok)throw new Error("Failed to mark todo as completed");let a=await o.json()}catch(o){console.error("Error marking todo as completed:",o)}},children:t.completed?"Completed":"Complete"}),e.jsx("button",{className:"m-4 mr-10 bg-[white]  hover:bg-red-900 rounded-lg text-red-500 font-medium py-2 px-4 rounded",onClick:async()=>{let a=(await fetch(`http://localhost:3000/todo/delete/${t._id}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).json();console.log(a)},children:"Delete"})]})]},t._id))})}function h(){const[r,t]=l.useState([]),[o,a]=l.useState(!1);return l.useEffect(()=>{setInterval(()=>{fetch("http://localhost:3000/todos",{headers:{userId:localStorage.getItem("userId"),"Content-Type":"application/json"}}).then(async s=>{let n=await s.json();t(n.todos)}).catch(s=>console.error("Error fetching todos:",s))},1e4),fetch("http://localhost:3000/todos",{headers:{userId:localStorage.getItem("userId"),"Content-Type":"application/json"}}).then(async s=>{let n=await s.json();t(n.todos)}).catch(s=>console.error("Error fetching todos:",s))},[]),{todos:r,loading:o}}function x(){let{todos:r,loading:t}=h();return e.jsx(e.Fragment,{children:t?e.jsx("div",{children:'"loading......"'}):e.jsx(p,{todos:r})})}function p({todos:r}){const[t,o]=l.useState(""),[a,s]=l.useState("");return e.jsxs(e.Fragment,{children:[e.jsx(i,{}),e.jsxs("div",{className:"mt-2 flex justify-between items-center w-full h-24 bg-[#444444] ",children:[e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"m-2",children:[e.jsx("div",{className:"text-white",children:" Title"}),e.jsx("input",{className:"border-4 border-yellow-700 rounded-lg",type:"text",onChange:n=>{o(n.target.value)}})]}),e.jsxs("div",{className:"m-2  ",children:[e.jsx("div",{className:"text-white",children:"Description"}),e.jsx("input",{className:"border-4 border-yellow-700 rounded-lg",type:"text",onChange:n=>{s(n.target.value)}})]})]}),e.jsx("div",{children:e.jsx("button",{onClick:async()=>{let d=await(await fetch("http://localhost:3000/todo",{method:"POST",body:JSON.stringify({userId:localStorage.getItem("userId"),title:t,description:a}),headers:{"Content-Type":"application/json"}})).json();console.log(d),d.found&&window.alert("The values already exists")},className:"m-2 mr-5 p-0 bg-[#d7a43b]  hover:bg-yellow-700 rounded-lg text-white font-medium py-2 px-4 rounded",children:"Add Todo"})})]}),e.jsx(c,{todos:r})]})}export{x as default};
